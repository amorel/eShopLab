
@model PagedList.IPagedList<eShopLab.Models.Product>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string Category = ViewBag.Category;
  
}
<div class="col-lg-9 col-md-9 col-sm-12">
    
        <div class="col-lg-12 col-sm-12">
            <span class="title">@Category</span>
                    Tri:
                    <select name="tri" onchange="location = this.options[this.selectedIndex].value;">
                        <option value=""></option>
                        <option value="@Url.Action("getProductCatalogView", "ProductCatalog", new { Category = ViewBag.Category, sortOrder = "Name_asc" })">Nom de produits ascendant</option>
                        <option value="@Url.Action("getProductCatalogView", "ProductCatalog", new { Category = ViewBag.Category, sortOrder = "Price_asc" })">Prx ascendant</option>
                        <option value="@Url.Action("getProductCatalogView", "ProductCatalog", new { Category = ViewBag.Category, sortOrder = "Name_desc" })">Nom de produits descendant</option>
                        <option value="@Url.Action("getProductCatalogView", "ProductCatalog", new { Category = ViewBag.Category, sortOrder = "Price_desc" })">Prx descendant</option>
                    </select>                       
        </div>      
   </div>
    
        @foreach (var item in Model)
        {
            <div class="col-lg-3 col-sm-3 col-sm-4 hero-feature text-center">
                <div class="thumbnail">
                    <a href="@Url.Action("Details", "ProductCatalog", new { Id =item.ProductID})" class="link-p">
                        <img src="../../images/product-2.jpg" alt="">
                    </a>
                    <div class="caption prod-caption">
                        <h4><a href="@Url.Action("Details", "ProductCatalog", new { Id =item.ProductID})">@item.ProductName </a></h4>
                        <p>@item.ProductDescription</p>
                        <p>
                            <div class="btn-group">
                                <a href="@Url.Action("Details", "ProductCatalog", new { Id =item.ProductID})" class="btn btn-default">@item.Prices.LastOrDefault().PriceValue.ToString()</a>
                                <a href="@Url.Action("Details", "ProductCatalog", new { Id =item.ProductID})" class="btn btn-primary"><i class="fa fa-shopping-cart"></i> Buy</a>
                            </div>
                        </p>
                    </div>
                </div>
            </div>
        }
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) sur @Model.PageCount
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page,sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter}))
   

@section scripts{ 
   @* <script>    
        $(document).ready(function () {         
            
            
            var searchString = $("#searchString").val();
            var Category = $("#Category").val();
            alert(Category);
            var Data = { Catalog: Category, searchString: searchString }

            $("#searchProducts").click(
                function () {
                    var data={ Category :Category,searchString:searchString,sortOrder:"Name_asc"};  
                    $.ajax({
                        url: 'Home/getProductCatalogView',
                        type: 'POST',
                        dataType: 'json',
                        data: data,
                        success: function () {
                            alert("ok");
                        },
                        error: function () {
                            alert("nok");
                        }
                    
                    }
                );
                }

        )
        })</script>*@
    }